<#include "/_pagelet/constant.html"/>
<!DOCTYPE html>
<html>
	<head>
		<title>新建帐户 | 陌陌黄金农场</title>
		<#include "/_pagelet/header.html"/>
		<style>
		.form-horizontal {
			margin-bottom: 0;
		}
		.form-horizontal .form-actions {
			margin-bottom: 0;
		}
		.main-content {
			margin-left: 0;
		}
		</style>
	</head>
	<body>
		<div class="navbar">
			<div class="navbar-inner">
				<#include "../../default/1.0.2/_pagelet/banner.html"/>
			</div><!--/.navbar-inner-->
		</div>

		<div class="main-container container-fluid">

			<div class="main-content">
				<!-- <div class="breadcrumbs" id="breadcrumbs">
					<ul class="breadcrumb">
						<li>
							<i class="icon-home home-icon"></i>
							<a href="/">首页</a>

							<span class="divider">
								<i class="icon-angle-right arrow-icon"></i>
							</span>
						</li>
						<li class="active">新建帐户</li>
					</ul>.breadcrumb

				</div> -->

				<div class="page-content">
					<div class="page-header position-relative">
						<h1>
							新建帐户
							<small>
								<i class="icon-double-angle-right"></i>
								Create Account
							</small>
						</h1>
					</div><!--/.page-header-->

					<div class="row-fluid">
						<div class="span12">
							<!--PAGE CONTENT BEGINS-->

							<div class="alert alert-block alert-error">
								<!-- <button type="button" class="close" data-dismiss="alert">
									<i class="icon-remove"></i>
								</button> -->

								<strong>
									<!-- <i class="icon-remove"></i> -->
									系统提示：
								</strong>
								<ol>
									<li>本功能仅用于未注册过的手机号码，一个手机号码只能注册一次。</li>
									<li>请细致填写账户资料，全球系统统一管理。</li>
									<li>如遇申诉需要验证您的手机号码和姓名，请如实填写。</li>
									<li>您必须为年满18周岁，60周岁以下完全民事行为能力的合法公民，不符合请勿注册。</li>
								</ol>
							</div>

							<div class="row-fluid">
								<div class="span12">
									<div class="tabbable">
										<ul class="nav nav-tabs" id="myTab">
											<li class="active">
												<a data-toggle="tab" href="#home">
													<!-- <i class="green icon-home bigger-110"></i> -->
													新建帐户
												</a>
											</li>
										</ul>

										<div class="tab-content">
											<div id="home" class="tab-pane in active">
												<form class="form-horizontal" id='frm'>
													<input type="hidden" name='token' value='${(data_token)!}' />
													<div class="control-group">
														<label class="control-label">推荐人</label>

														<div class="controls">
															<input type="text" class='input-small' id="frm_pid" placeholder="新用户编号" value='${user_id}' disabled />
															<!-- <button class="btn btn-mini btn-info">换一个</button> -->
														</div>
													</div>
													<div class="control-group" for='frm_nickname'>
														<label class="control-label" for="frm_nickname">昵称</label>

														<div class="controls">
															<input type="text" class='input-large' id="frm_nickname" name='nickname' placeholder="昵称" />
														</div>
													</div>
													<div class="control-group">
														<label class="control-label" for='frm_real_name'>姓名</label>

														<div class="controls">
															<input type="text" class='input-large' id='frm_real_name' name='real_name' placeholder='姓名' />
														</div>
													</div>
													<div class="control-group">
														<label class="control-label" for='frm_mobile'>手机号</label>

														<div class="controls">
															<input type="text" class='input-large' id='frm_mobile' name='mobile' placeholder='手机号' />
														</div>
													</div>
													<div class="control-group">
														<label class="control-label" for='frm_email'>电子邮箱</label>

														<div class="controls">
															<input type="text" class='input-large' id='frm_email' name='email' placeholder='电子邮箱' />
														</div>
													</div>
													<div class="control-group">
														<label class="control-label" for="frm_user_pass">登录密码</label>

														<div class="controls">
															<input type="password" class='input-small' id="frm_user_pass" name='user_pass' placeholder="登录密码" />
															<input type="password" class='input-small' id="frm_user_pass_2" placeholder="重复登录密码" />
														</div>
													</div>
													<div class="control-group">
														<label class="control-label" for="frm_user_pass_safe">安全密码</label>

														<div class="controls">
															<input type="password" class='input-small' id="frm_user_pass_safe" name='user_pass_safe' placeholder="安全密码" />
															<input type="password" class='input-small' id="frm_user_pass_safe_2" placeholder="重复安全密码" />
														</div>
													</div>
													<div class="control-group">
														<label class="control-label" for="frm_verifyCode">图形验证码</label>

														<div class="controls">
															<input type="text" class='input-small' id="frm_verifyCode" name='verifyCode' placeholder="图形验证码" />
															<img id='img_verifyCode' style='height:28px' src='' title='点击更换验证码'>
														</div>
													</div>
													<div class="control-group">
														<label class="control-label" for="frm_verifycode_sms">短信验证码</label>

														<div class="controls">
															<input type="text" class='input-small' id="frm_verifycode_sms" name='verifycode_sms' placeholder="短信验证码" />
															<a class="btn btn-mini btn-danger" href='javascript:sendSms();'>获取短信验证码</a>
														</div>
													</div>
													<div class="form-actions">
														<button class="btn btn-info" type="button" id='btn_submit'>
															<i class="icon-ok bigger-110"></i>
															提交
														</button>

														&nbsp; &nbsp; &nbsp;
														<button class="btn" type="reset">
															<i class="icon-undo bigger-110"></i>
															重置
														</button>
													</div>
												</form>
											</div>
										</div>
									</div>
								</div>
							</div>

							<!--PAGE CONTENT ENDS-->
						</div><!--/.span-->
					</div><!--/.row-fluid-->
				</div><!--/.page-content-->

			</div><!--/.main-content-->
		</div><!--/.main-container-->

		<a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-small btn-inverse">
			<i class="icon-double-angle-up icon-only bigger-110"></i>
		</a>

		<#include "/_pagelet/js.html"/>

		<script>
		$('#img_verifyCode').click(function(){
			showVerifyCode();
		});

		function showVerifyCode(){
			$('#img_verifyCode').attr('src', '/verifyCode.jpg?ts='+ (new Date()).valueOf());
		}

		function sendSms(){

			$.ajax({
				url : '${(conf_html_virtualPath)!}sendSms',
				type : 'POST',
				dataType : 'JSON',
				data : $('#frm').serializeObjectForm(),
				success : function(data) {
					if (data.success) {
						alert('发送成功，请查收')
						return;
					} // END
					if (data.msg)
						alert(data.msg[0]);
				},
				error : function() {
					alert(arguments[2]);
				}
			});
		}

		$(function(){
			$('#banner_welcome').remove();

			showVerifyCode();

			$('#btn_submit').click(function() {

				if ($('#frm_user_pass').val() !== $('#frm_user_pass_2').val()) {
					return alert('两次输入的登陆密码不一致');
				}

				if ($('#frm_user_pass_safe').val() !== $('#frm_user_pass_safe_2').val()) {
					return alert('两次输入的安全密码不一致');
				}

				var data = $('#frm').serializeObjectForm();
				data.pid = $('#frm_pid').val();

				$.ajax({
					url : '${(conf_html_virtualPath)!}t/',
					type : 'POST',
					dataType : 'JSON',
					data : data,
					success : function(data) {
						if (data.success) {
							alert('新建帐户成功');
							location.href = '${(conf_html_virtualPath)!}';
						}else{
							if (data.msg) alert(data.msg[0]);
							showVerifyCode();
						}
					},
					error : function() {
						alert(arguments[2]);
					}
				});
			});
		});
		</script>
	</body>
</html>